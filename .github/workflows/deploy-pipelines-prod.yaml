name: Deploy Pipelines - PROD

on:
  workflow_dispatch:
  push:
    branches:
      - EC-403-devops-decommissioning

jobs:
  deploy_on_prod:
    uses: pagopa/dx/.github/workflows/legacy_deploy_pipelines.yaml@workflow-functions-test
    name: Deploy on PROD
    secrets: inherit
    with:
      environment: 'prod'
      resource_group_name: 'io-p-assets-cdn-rg'
      app_name: 'io-p-assets-cdn-fn'
      use_staging_slot: true
      use_private_agent: false
      health_check_path: '/info'